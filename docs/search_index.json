[["index.html", "NY Crime Investigation Chapter 1 Introduction", " NY Crime Investigation Jingwen Bai, Qiran Li, Zheng Wu 2021-12-11 Chapter 1 Introduction "],["data-sources.html", "Chapter 2 Data sources 2.1 NYPD Complaints Dataset 2.2 NYPD Arrest Dataset 2.3 Other Data Sets 2.4 Featured Variables", " Chapter 2 Data sources We acquired our data through the NYC Open Data Website. It contains free public data published by New York City agencies and other partners. Specifically, we attained data from the Police Department data (NYPD) data set. The online database provides api and .csv version of data. The primary data sources of this project are NYPD Complaint Data Historical and NYPD Arrests Data (Historic). We also consider the missing value situation of several other data sets. Including Motor vehicle Collisions and Crashes, Arrest Data (YTD), Complaint Data (YTD), Criminal Court Summons (historical), Criminal Court Summons (YTD), Hate Crimes, Shooting Incident Data (historical), and Shooting Incident Data (YTD). One can easily find these data sets on the original data provider website NYC Open Data Website, or check our Google Drive collection. 2.1 NYPD Complaints Dataset NYPD Complaint Data Historical data set includes all valid felony, misdemeanor, and violation crimes reported to the New York City Police Department (NYPD) from 2006 to the end of last year (2019). For additional details, please see the attached data dictionary in the ‘About’ section. (Source) Table 2.1: Major columns used in NYPD Complaints Variables Description CMPLNT_FR_DT Date in %m/%d/%y, Exact date of occurrence for the reported event (or starting date of occurrence, if CMPLNT_TO_DT exists) 2.2 NYPD Arrest Dataset NYPD Arrests Data (Historic) includes a list of every arrest in NYC going back to 2006 through the end of the previous calendar year. This is a breakdown of every arrest effected in NYC by the NYPD going back to 2006 through the end of the previous calendar year. This data is manually extracted every quarter and reviewed by the Office of Management Analysis and Planning before being posted on the NYPD website. Each record represents an arrest effected in NYC by the NYPD and includes information about the type of crime, the location and time of enforcement. In addition, information related to suspect demographics is also included. (Source) Table 2.2: Major columns used in NYPD Arrest Variables Description LAW_CAT_CD Text, Level of offense: felony, misdemeanor, violation ARREST_DATE Date in %m/%d/%y, Exact date of arrest for the reported event 2.3 Other Data Sets For more details on data sets mentioned above other than Complaints and Arrest, please check Chapter 04-Cleaning. 2.4 Featured Variables There are some specific columns that we were concentrate on: LAW_CAT_CD: Level of offense: felony, misdemeanor, violation ARREST_DATE: Exact date of arrest for the reported event ARREST_BORO: Borough of arrest. B(Bronx), S(Staten Island), K(Brooklyn), M(Manhattan), Q(Queens) Latitude: Latitude coordinate for Global Coordinate System, WGS 1984, decimal degrees (EPSG 4326) Longitude: Longitude coordinate for Global Coordinate System, WGS 1984, decimal degrees (EPSG 4326) Definitions of other variables can be found at our Google Drive data collection. "],["data-transformation.html", "Chapter 3 Data transformation 3.1 Construction of Processing Modules 3.2 Preprocessing: Loading and Descriptive Analysis 3.3 Pre-processing for Arrest Data 3.4 Pre-processing for Complaint Data 3.5 Pre-processing for other Data Sets 3.6 Next Stage", " Chapter 3 Data transformation The NYPD Open Data Sets are generally well constructed and with consistent data structure and type, and the sets usually do not have serious missing value issues. Therefore, our focus here would mainly be insights formulation, where we shall decide the specific metric for further exploration. Specifically, we include the basic data transformation as the pre-processing module to clean the data and obtain some fundamental insights. Notice that, since all our data listed here have millions of rows, so we turn to the ff library to enable fast loading the data set feature. Besides, we also developed several reusable modules for cleaner and more efficient processing. For more information on ‘ff’ package, please check here. Our interest lies on the geometry distribution and the time series analysis of our Arrest Data and Complaint Data. Finally, after successfully cleaned/pre-processed the Arrest Data and the Complaint Data, we introduced a map API as well to include the geometry information for our further visualized and interactive analysis in later chapters. 3.1 Construction of Processing Modules We developed several reusable modules that we would repetitively use in our analysis below. Specifically, we set our environment as well as a time stamp formatting function to unify our criteria for date data. One can implement these modules via the syntax of time-and-date manipulation in R and “knitr” as well as “magrittr” packages. We also developed a mimic function for str() to provide insights of the data sets in a table way. To formulate proper data structure and columns, we developed a function allowing we derive year and/or month information from the original time stamp column of Arrest Data. Further more, this function also allow us to decide whether an grouping by year and/or month is needed. One can find further details in our repository. For a detailed implementation, please refer to our repository. 3.2 Preprocessing: Loading and Descriptive Analysis We created tables for the data set structures to get a first impression on how exactly the data is showed. ## &#39;data.frame&#39;: 5153369 obs. of 19 variables: ## $ ARREST_KEY : int 32311380 192799737 193260691 149117452 190049060 24288194 189182271 196324211 196785901 197554056 ... ## $ ARREST_DATE : Factor w/ 5479 levels &quot;01/01/2019&quot;,&quot;01/02/2018&quot;,..: 247 44 62 9 495 399 462 164 181 210 ... ## $ PD_CD : int 511 177 NA 153 157 203 153 157 175 175 ... ## $ PD_DESC : Factor w/ 423 levels &quot;&quot;,&quot;ACCOSTING,FRAUDULENT&quot;,..: 33 153 1 139 137 176 139 137 155 155 ... ## $ KY_CD : int 235 116 NA 104 104 352 104 104 233 233 ... ## $ OFNS_DESC : Factor w/ 88 levels &quot;&quot;,&quot;ADMINISTRATIVE CODE&quot;,..: 11 56 1 54 54 10 54 54 56 56 ... ## $ LAW_CODE : Factor w/ 2441 levels &quot;&quot;,&quot;ABC00000MA&quot;,..: 308 137 334 114 117 151 114 117 129 129 ... ## $ LAW_CAT_CD : Factor w/ 5 levels &quot;&quot;,&quot;F&quot;,&quot;I&quot;,&quot;M&quot;,..: 4 2 2 2 2 4 2 2 4 4 ... ## $ ARREST_BORO : Factor w/ 6 levels &quot;B&quot;,&quot;K&quot;,&quot;M&quot;,&quot;Q&quot;,..: 4 3 3 2 2 2 3 2 1 3 ... ## $ ARREST_PRECINCT : int 27 25 14 67 77 77 5 77 50 26 ... ## $ JURISDICTION_CODE: int 1 0 0 0 0 2 0 0 0 0 ... ## $ AGE_GROUP : Factor w/ 92 levels &quot;&lt;18&quot;,&quot;18-24&quot;,..: 2 4 3 3 3 4 4 4 3 4 ... ## $ PERP_SEX : Factor w/ 2 levels &quot;F&quot;,&quot;M&quot;: 2 2 2 2 2 2 2 2 2 1 ... ## $ PERP_RACE : Factor w/ 8 levels &quot;AMERICAN INDIAN/ALASKAN NATIVE&quot;,..: 3 3 5 3 3 3 7 4 3 3 ... ## $ X_COORD_CD : num NA 1000555 986685 998032 1003606 ... ## $ Y_COORD_CD : num NA 230994 215375 175598 185050 ... ## $ Latitude : num NA 40.8 40.8 40.6 40.7 ... ## $ Longitude : num NA -73.9 -74 -74 -73.9 ... ## $ Lon_Lat : Factor w/ 119134 levels &quot;&quot;,&quot;POINT (-73.70659676099996 40.75353245800005)&quot;,..: 1 3325 4680 3693 2941 2826 4834 2941 1926 3905 ... (#tab:load the data, arrest)Head 6 Rows in Arrest Dataset for Temporal Analysis ARREST_KEY ARREST_DATE PD_CD PD_DESC KY_CD OFNS_DESC LAW_CODE LAW_CAT_CD ARREST_BORO ARREST_PRECINCT JURISDICTION_CODE AGE_GROUP PERP_SEX PERP_RACE X_COORD_CD Y_COORD_CD Latitude Longitude Lon_Lat 32311380 06/18/2007 511 CONTROLLED SUBSTANCE, POSSESSION 7 235 DANGEROUS DRUGS PL 2200300 M Q 27 1 18-24 M BLACK NA NA NA NA 192799737 01/26/2019 177 SEXUAL ABUSE 116 SEX CRIMES PL 1306503 F M 25 0 45-64 M BLACK 1000555 230994 40.80069 -73.94111 POINT (-73.94110928599997 40.800694331000045) 193260691 02/06/2019 NA NA PL 2203400 F M 14 0 25-44 M UNKNOWN 986685 215375 40.75784 -73.99121 POINT (-73.99121211099998 40.75783900300007) 149117452 01/06/2016 153 RAPE 3 104 RAPE PL 1302503 F K 67 0 25-44 M BLACK 998032 175598 40.64865 -73.95034 POINT (-73.95033556299995 40.648650085000035) 190049060 11/15/2018 157 RAPE 1 104 RAPE PL 1303501 F K 77 0 25-44 M BLACK 1003606 185050 40.67458 -73.93022 POINT (-73.93022154099998 40.67458330800008) 24288194 09/13/2006 203 TRESPASS 3, CRIMINAL 352 CRIMINAL TRESPASS PL 140100E M K 77 2 45-64 M BLACK 1004580 183838 40.67125 -73.92671 POINT (-73.926713851 40.67125445700003) The data is relatively complex. First, for our Arrest Data, we acquired over 5.1 million rows and 19 variables. Column1_ Variable Column2_ Classe Column3_ First_value || ARREST_KEY || integer || 32311380, 192799737, 193260691 || ARREST_DATE || integer || 06/18/2007, 01/26/2019, 02/06/2019 || PD_CD || integer || 511, 177, NA || PD_DESC || integer || CONTROLLED SUBSTANCE, POSSESSION 7, SEXUAL ABUSE, || KY_CD || integer || 235, 116, NA || OFNS_DESC || integer || DANGEROUS DRUGS, SEX CRIMES, || LAW_CODE || integer || PL 2200300, PL 1306503, PL 2203400 || LAW_CAT_CD || integer || M, F, F || ARREST_BORO || integer || Q, M, M || ARREST_PRECINCT || integer || 27, 25, 14 || JURISDICTION_CODE || integer || 1, 0, 0 || AGE_GROUP || integer || 18-24, 45-64, 25-44 || PERP_SEX || integer || M, M, M || PERP_RACE || integer || BLACK, BLACK, UNKNOWN || X_COORD_CD || double || NA, 1000555, 986685 || Y_COORD_CD || double || NA, 230994, 215375 || Latitude || double || NA, 40.800694331, 40.7578390030001 || Longitude || double || NA, -73.941109286, -73.991212111 || Lon_Lat || integer || , POINT (-73.94110928599997 40.800694331000045), POINT (-73.99121211099998 40.75783900300007) Then, for our Complaints Data, we acquired over 7.3 million rows and 35 variables. Column1_ Variable Column2_ Classe Column3_ First_value || CMPLNT_NUM || integer || 394506329, 968873685, 509837549 || CMPLNT_FR_DT || character || 12/31/2019, 12/29/2019, 12/15/2019 || CMPLNT_FR_TM || character || 17:30:00, 16:31:00, 18:45:00 || CMPLNT_TO_DT || character || , 12/29/2019, || CMPLNT_TO_TM || character || , 16:54:00, || ADDR_PCT_CD || integer || 32, 47, 109 || RPT_DT || character || 12/31/2019, 12/29/2019, 12/29/2019 || KY_CD || integer || 118, 113, 578 || OFNS_DESC || character || DANGEROUS WEAPONS, FORGERY, HARRASSMENT 2 || PD_CD || integer || 793, 729, 638 || PD_DESC || character || WEAPONS POSSESSION 3, FORGERY,ETC.,UNCLASSIFIED-FELO, HARASSMENT,SUBD 3,4,5 || CRM_ATPT_CPTD_CD || character || COMPLETED, COMPLETED, COMPLETED || LAW_CAT_CD || character || FELONY, FELONY, VIOLATION || BORO_NM || character || MANHATTAN, BRONX, QUEENS || LOC_OF_OCCUR_DESC || character || , , FRONT OF || PREM_TYP_DESC || character || STREET, STREET, STREET || JURIS_DESC || character || N.Y. POLICE DEPT, N.Y. POLICE DEPT, N.Y. POLICE DEPT || JURISDICTION_CODE || integer || 0, 0, 0 || PARKS_NM || character || , , || HADEVELOPT || character || , , || HOUSING_PSA || character || , , || X_COORD_CD || integer || 999937, 1022508, 1034178 || Y_COORD_CD || integer || 238365, 261990, 209758 || SUSP_AGE_GROUP || character || , , 25-44 || SUSP_RACE || character || , , UNKNOWN || SUSP_SEX || character || , , M || TRANSIT_DISTRICT || integer || NA, NA, NA || Latitude || double || 40.820926797, 40.8857014060001, 40.742281156 || Longitude || double || -73.943324219, -73.861640325, -73.81982408 || Lat_Lon || character || (40.82092679700002, -73.94332421899996), (40.885701406000074, -73.86164032499995), (40.74228115600005, -73.81982408) || PATROL_BORO || character || PATROL BORO MAN NORTH, PATROL BORO BRONX, PATROL BORO QUEENS NORTH || STATION_NAME || character || , , || VIC_AGE_GROUP || character || UNKNOWN, UNKNOWN, 25-44 || VIC_RACE || character || UNKNOWN, UNKNOWN, WHITE HISPANIC || VIC_SEX || character || E, E, F We processed the Arrest Data, Complaints Data and other data sets separately. 3.3 Pre-processing for Arrest Data 3.3.1 Arrest Data: Time Analysis Pre-processing To formulate proper data structure and columns, we developed a function allowing we derive year and/or month information from the original time stamp column of Arrest Data. Further more, this function also allow us to decide whether an grouping by year and/or month is needed. One can find further details in our repository. Table 3.1: Head 6 Rows in Arrest Dataset for Temporal Analysis Year LAW_CAT_CD count prop 2006 F 103308 0.2786039 2006 I 2040 0.0055015 2006 M 245508 0.6620928 2006 V 19950 0.0538017 2007 F 108617 0.2700982 2007 I 4234 0.0105287 We selected information from year, LAW_CAT_CD (crime category), counting of each category, and probability represented by frequency out via processing on ‘LAW_CAT_CD’, ‘ARREST_DATE’, and ‘Year’. This allowed us to perform a analysis on crime category based on their counting and probability in a time series manner. Column1_ Variable Column2_ Classe Column3_ First_value || Year || character || 2006, 2006, 2006 || LAW_CAT_CD || integer || F, I, M || count || integer || 103308, 2040, 245508 || prop || double || 0.278603906085662, 0.00550152910147085, 0.662092846394071 3.3.2 Arrest Data: Geometry Anaylsis Pre-processing We selected out ‘LAW_CAT_CD’, ‘ARREST_DATE’, ‘Year’, ‘ARREST_BORO’, ‘Latitude’, and ‘Longitude’ in order to get a better understanding on the geometry distribution of the crimes. Table 3.2: Head 6 Rows in Arrest Dataset for Spatial Analysis LAW_CAT_CD ARREST_DATE Year ARREST_BORO Latitude Longitude F 01/26/2019 2019 M 40.80069 -73.94111 F 02/06/2019 2019 M 40.75784 -73.99121 F 01/06/2016 2016 K 40.64865 -73.95034 F 11/15/2018 2018 K 40.67458 -73.93022 M 09/13/2006 2006 K 40.67125 -73.92671 F 10/24/2018 2018 M 40.71620 -73.99749 Here is a brief structure of the cleaned data set. Column1_ Variable Column2_ Classe Column3_ First_value || LAW_CAT_CD || integer || F, F, F || ARREST_DATE || integer || 01/26/2019, 02/06/2019, 01/06/2016 || Year || character || 2019, 2019, 2016 || ARREST_BORO || integer || M, M, K || Latitude || double || 40.800694331, 40.7578390030001, 40.648650085 || Longitude || double || -73.941109286, -73.991212111, -73.950335563 3.4 Pre-processing for Complaint Data Our modification on Complaint Data set are similar to what we processed on Arrest Data set. 3.5 Pre-processing for other Data Sets No pre-processing is needed for other data sets. 3.6 Next Stage We have successfully constructed cleaned data sets for our actual analysis now. "],["missing-values.html", "Chapter 4 Missing values 4.1 Missing Data Analysis", " Chapter 4 Missing values 4.1 Missing Data Analysis There are indeed a lot of missing data in our NYPD crime datasets. Here is a compreshensive missing data analyzing accross all the data set. Notice that, for some datasets, we have more than 1 billion rows. To simplified the first draft analysis, we always choose the first 50000 rows if the number of rows exceeds or equals to 50000, otherwise the whole dataset. Also, to keep track on our exploration targets, we choose to delete some of the unrelated variables. Beside, to make our graphs more readable, we have coded the original name of variables into integers. Specific coding rules will be explained during the analyzing below. 4.1.1 For shooting data (Historical): Here is our “shooting incident (historical)” dataset. The original dataset contains 19 variables and 23568 observations. To simplify our analysis, we have figured that variables named “JURISDICTION_CODE”,“X_COORD_CD”, “Y_COORD_CD”, “Lon_Lat” are not necessary. So we deleted them. As shown below, according to the order in the data frame, we coded the variables from 1 to 15. As one can see, the variables except x6, x8, x9, x10 are all completed. What noticealbe is that the x6 variable (LOCATION_DESC) has a missing rate almost 30%. And 25% of all the cases are recorded completed. Beside, the age group, sex, and race of crininals are often missed (x8, x9, and x10), especially the ages, almost 40% of missing data are related to ages. 4.1.2 For shooting data (YTD): Here is our “shooting incident (YTD)” dataset. The original dataset contains 19 variables and 902 observations. To simplify our analysis, we have figured that variables named “JURISDICTION_CODE”,“X_COORD_CD”, “Y_COORD_CD”, “Lon_Lat” are not necessary. So we deleted them. As shown below, according to the order in the data frame, we coded the variables from 1 to 15. As one can see, there are only 4 vairables are missed: location, age group, sex, and race. Similarly to the historical data, the identification of the cirminals (age, sex, race) are often missed. However, we still have about 15% of all the data are complete. Besides, over 55% percent of missing data are because of age, sex, and race of the cirminals. Which may indicates that the shooting crime criminals are very hard to identificate. 4.1.3 For Hata Crimes: Here is our “hate crimes” dataset. The original dataset contains 14 variables and 1704 observations. To simplify our analysis, we have figured that variables named “JURISDICTION_CODE”,“X_COORD_CD”, “Y_COORD_CD”, “Lon_Lat”, “Arrest.Id”, “Complaint.Precinct.Code”, “Arrest.Date”, “Full.Complaint.ID” are not necessary. So we deleted them. As shown below, according to the order in the data frame, we coded the variables from 1 to 10. It is very impressive to find out that the hate crime data are all completes cases. Nothing was missed according to the rocords of NYPD. 4.1.4 For crime court summons (Historical): Here is our “crime court summons (historical)” dataset. The original dataset contains 17 variables and 50000 observations. To simplify our analysis, we have figured that variables named “JURISDICTION_CODE”,“X_COORDINATE_CD”, “Y_COORDINATE_CD”, “Lon_Lat”, “PRECINCT_OF_OCCUR”, “SUMMONS_KEY” are not necessary. So we deleted them. As shown below, according to the order in the data frame, we coded the variables from 1 to 12. As one can see, there are 6 out of 12 variables can be missing in our historical cour summons datasets, which is x4 to x9, which is LAW_DESCRIPTION, SUMMONS_CATEGORY_TYPE, AGE_GROUP, SEX, RACE, and BORO. What important is, we still have 35% of observations are completed. Law description missing are often related with summons category missing, which combined leads to 25% percent of the missing cases. What’s more, similar to our anlysis in the shooting crimes, it is also hard to identify the criminals by age, sex, and race, which combined leads to 38% of missing. Other missing are very small in number. 4.1.5 For crime court summons (YTD): Here is our “crime court summons (YTD)” dataset. The original dataset contains 17 variables and 25691 observations. To simplify our analysis, we have figured that variables named “JURISDICTION_CODE”,“X_COORDINATE_CD”, “Y_COORDINATE_CD”, “Lon_Lat”, “PRECINCT_OF_OCCUR”, “SUMMONS_KEY” are not necessary. So we deleted them. As shown below, according to the order in the data frame, we coded the variables from 1 to 12. This data set is not ideal. As one can percieve, there are only 4 variables out of 12 are complete. Good news is, we still got 25% percent of data are complete. Besides, the missin are mainly from 2 kinds: one is the missing of age, sex, and race; the other is from law description and summon type. This pattern is similar to the historical data. 4.1.6 For Motor Vehicle Collisions and Crahses (Historical): Here is our “crime court summons (YTD)” dataset. The original dataset contains 29 variables and 50000 observations. To simplify our analysis, we have figured that variables named “COLLISION_ID”, “LOCATION”, “ZIP.CODE”, “CONTRIBUTING.FACTOR.VEHICLE.1”, “CONTRIBUTING.FACTOR.VEHICLE.2”, “CONTRIBUTING.FACTOR.VEHICLE.3”, “CONTRIBUTING.FACTOR.VEHICLE.4”, “CONTRIBUTING.FACTOR.VEHICLE.5”, “VEHICLE.TYPE.CODE.1”, “VEHICLE.TYPE.CODE.2”, “VEHICLE.TYPE.CODE.3”, “VEHICLE.TYPE.CODE.4”, “VEHICLE.TYPE.CODE.5” are not necessary. So we deleted them. As shown below, according to the order in the data frame, we coded the variables from 1 to 16. It is weird that almost all missing data are related to the missing of location information, which is x8, x7, and x3, which are borough, on-street name, and out-street name. This pattern may indicates that in our motor collisions and curshed datasets, it can be difficult to locate the criminals, which may also shows that there is a tendency to run away after curshed in NYC. 4.1.7 For arrest (Historical): Here is our “crime court summons (YTD)” dataset. The original dataset contains 19 variables and 50000 observations. To simplify our analysis, we have figured that variables named “JURISDICTION_CODE”,“X_COORD_CD”, “Y_COORD_CD”, “Lon_Lat” are not necessary. So we deleted them. As shown below, according to the order in the data frame, we coded the variables from 1 to 15. Our arrests datasets are very friendly for analysts. Almost all the cases are complete. 4.1.8 For arrest (YTD): Here is our “crime court summons (YTD)” dataset. The original dataset contains 19 variables and 74243 observations. To simplify our analysis, we have figured that variables named “JURISDICTION_CODE”,“X_COORD_CD”, “Y_COORD_CD”, “Lon_Lat”, “New.Georeferenced.Column” are not necessary. So we deleted them. As shown below, according to the order in the data frame, we coded the variables from 1 to 15. Just like the historical datasets, the YTD datasets are almost complete. "],["results.html", "Chapter 5 Results 5.1 Crime Arrest Analysis 5.2 Hate Crime Analysis", " Chapter 5 Results 5.1 Crime Arrest Analysis 5.1.1 Overall Illustration on Map 5.1.2 Time Analysis We first perform some transformation on the arrest dataset to enable our illustration for the trend of the data. Then we first could illustrate in the time line to see the trend of the overall incidents for each level of offense to see if there is any dramatic change in the pandameic year. Also, we could investigate the ratio of each kind of offense by years by looking at the stacked bar plot, From the plot, we notice that though over the years since 2016 to 2020, the misdemeanor level of offense remains as the most frequently happened events, its ratio suffers a significant decrease. Moreover, we can witness the improvement in the safety of the community by noticing the fewer and fewer occupation of the violation class events. 5.1.3 Spatial Analysis Having some basic idea in temporal data, we could then zoom in to investigate the detailed spatial distibution of those offense incidents. daibiaoxing nianfen, zooming in dao diqu 5.2 Hate Crime Analysis Total Hate Crime Number this year "],["interactive-component.html", "Chapter 6 Interactive component 6.1 Overview of Arrests Data by Time", " Chapter 6 Interactive component 6.1 Overview of Arrests Data by Time Total Arrests in History Arrests by Categories in 2021 Select a crime category: "],["conclusion.html", "Chapter 7 Conclusion", " Chapter 7 Conclusion "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
